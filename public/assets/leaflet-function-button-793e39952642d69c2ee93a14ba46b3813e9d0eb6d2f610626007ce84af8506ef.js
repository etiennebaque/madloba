L.FunctionButtons=L.Control.extend({includes:L.Mixin.Events,initialize:function(t,n){"push"in t&&"splice"in t||(t=[t]),this._buttons=t,!n&&t.length>0&&"position"in t[0]&&(n={position:t[0].position}),L.Control.prototype.initialize.call(this,n)},onAdd:function(t){this._map=t,this._links=[];for(var n=L.DomUtil.create("div","leaflet-bar"),i=0;i<this._buttons.length;i++){var e=this._buttons[i],o=L.DomUtil.create("a","btn btn-xs btn-success no-color",n);o._buttonIndex=i,o.href=e.href||"#",e.href&&(o.target="funcbtn"),o.style.width="auto",o.style.minWidth="20px",e.bgColor&&(o.style.backgroundColor=e.bgColor),e.title&&(o.title=e.title),e.link=o,this._updateContent(i);var s=L.DomEvent.stopPropagation;L.DomEvent.on(o,"click",s).on(o,"mousedown",s).on(o,"dblclick",s),e.href||L.DomEvent.on(o,"click",L.DomEvent.preventDefault).on(o,"click",this.clicked,this)}return n},_updateContent:function(t){if(!(t>=this._buttons.length)){var n=this._buttons[t],i=n.link,e=n.content;if(i)if(void 0===e||e===!1||null===e||""===e)i.innerHTML=n.alt||"&nbsp;";else if("string"==typeof e){var o=e.length<4?"":e.substring(e.length-4),s="data:image/"===e.substring(0,11);".png"===o||".gif"===o||".jpg"===o||s?(i.style.width=""+(n.imageSize||26)+"px",i.style.height=""+(n.imageSize||26)+"px",i.style.padding="0",i.style.backgroundImage="url("+e+")",i.style.backgroundRepeat="no-repeat",i.style.backgroundPosition=n.bgPos?-n.bgPos[0]+"px "+-n.bgPos[1]+"px":"0px 0px"):i.innerHTML=e}else{for(;i.firstChild;)i.removeChild(i.firstChild);i.appendChild(e)}}},setContent:function(t,n){void 0===n&&(n=t,t=0),t<this._buttons.length&&(this._buttons[t].content=n,this._updateContent(t))},setTitle:function(t,n){if(void 0===n&&(n=t,t=0),t<this._buttons.length){var i=this._buttons[t];i.title=n,i.link&&(i.link.title=n)}},setBgPos:function(t,n){if(void 0===n&&(n=t,t=0),t<this._buttons.length){var i=this._buttons[t];i.bgPos=n,i.link&&(i.link.style.backgroundPosition=n?-n[0]+"px "+-n[1]+"px":"0px 0px")}},setHref:function(t,n){if(void 0===n&&(n=t,t=0),t<this._buttons.length){var i=this._buttons[t];i.href=n,i.link&&(i.link.href=n)}},clicked:function(t){for(var n=window.event&&window.event.srcElement||t.target||t.srcElement;n&&"tagName"in n&&"A"!==n.tagName&&!("_buttonIndex"in n);)n=n.parentNode;if("_buttonIndex"in n){var i=this._buttons[n._buttonIndex];i&&("callback"in i&&i.callback.call(i.context),this.fire("clicked",{idx:n._buttonIndex}))}}}),L.functionButtons=function(t,n){return new L.FunctionButtons(t,n)},L.functionButton=function(t,n,i){return n?n.content=t:n={content:t},L.functionButtons([n],i)};